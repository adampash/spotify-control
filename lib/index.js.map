{"version":3,"sources":["../src/index.js"],"names":["SpotifyWebApi","require","spotifyApi","setAccessToken","process","env","SPOTIFY_ACCESS_TOKEN","selectDevice","device","result","transferMyPlayback","deviceIds","id","play","e","console","log","toggleDevice","response","getMyDevices","body","devices","stereo","find","name","toLowerCase","startsWith","STEREO","local","LOCAL","is_active","module","exports","toggle"],"mappings":"AAAA,MAAMA,gBAAgBC,QAAQ,sBAAR,CAAtB;;AAEA,MAAMC,aAAa,IAAIF,aAAJ,EAAnB;;AAEAE,WAAWC,cAAX,CAA0BC,QAAQC,GAAR,CAAYC,oBAAtC;;AAEA,MAAMC,eAAe,MAAMC,MAAN,IAAgB;AACnC,MAAI;AACF,UAAMC,SAAS,MAAMP,WAAWQ,kBAAX,CAA8B;AACjDC,iBAAW,CAACH,OAAOI,EAAR,CADsC;AAEjDC,YAAM;AAF2C,KAA9B,CAArB;AAID,GALD,CAKE,OAAOC,CAAP,EAAU;AACVC,YAAQC,GAAR,CAAa,GAAb,EAAiBF,CAAjB;AACD;AACF,CATD;;AAWA,MAAMG,eAAe,YAAY;AAC/B,QAAMC,WAAW,MAAMhB,WAAWiB,YAAX,EAAvB;AACA,QAAM,EAAEC,MAAM,EAAEC,OAAF,EAAR,KAAwBH,QAA9B;AACA,QAAMI,SAASD,QAAQE,IAAR,CAAa,CAAC,EAAEC,IAAF,EAAD,KAC1BA,KAAKC,WAAL,GAAmBC,UAAnB,CAA8BtB,QAAQC,GAAR,CAAYsB,MAA1C,CADa,CAAf;AAGA,QAAMC,QAAQP,QAAQE,IAAR,CAAa,CAAC,EAAEC,IAAF,EAAD,KACzBA,KAAKC,WAAL,GAAmBC,UAAnB,CAA8BtB,QAAQC,GAAR,CAAYwB,KAA1C,CADY,CAAd;AAGAtB,eAAaqB,MAAME,SAAN,GAAkBR,MAAlB,GAA2BM,KAAxC;AACD,CAVD;;AAYAG,OAAOC,OAAP,GAAiB;AACfC,UAAQhB;AADO,CAAjB","file":"index.js","sourcesContent":["const SpotifyWebApi = require('spotify-web-api-node');\n\nconst spotifyApi = new SpotifyWebApi();\n\nspotifyApi.setAccessToken(process.env.SPOTIFY_ACCESS_TOKEN);\n\nconst selectDevice = async device => {\n  try {\n    const result = await spotifyApi.transferMyPlayback({\n      deviceIds: [device.id],\n      play: true,\n    });\n  } catch (e) {\n    console.log(`e`, e);\n  }\n};\n\nconst toggleDevice = async () => {\n  const response = await spotifyApi.getMyDevices();\n  const { body: { devices } } = response;\n  const stereo = devices.find(({ name }) =>\n    name.toLowerCase().startsWith(process.env.STEREO)\n  );\n  const local = devices.find(({ name }) =>\n    name.toLowerCase().startsWith(process.env.LOCAL)\n  );\n  selectDevice(local.is_active ? stereo : local);\n};\n\nmodule.exports = {\n  toggle: toggleDevice,\n};\n"]}